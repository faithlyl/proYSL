var dataLayer=window.dataLayer||[];var headerPromotionShow="";var homePageProductShowIndex="";$(window).load(function(){var a=window.location.pathname;headerFooterPromotionImpressions();headerFooterPromotionClick();headerFooterProductImpressions();miniCartProductClick();if(a===""||a==="/"||a==="/index"){homepageTracking()}if(a.indexOf("landing")>0){landingPageTracking()}if(a.indexOf("search")>=0||a.indexOf("/skincare")>=0||a.indexOf("/fragrance")>=0||a.indexOf("/gifts")>=0||a.indexOf("makeup")>=0){plpProductImpression(a);plpProductClick(a)}if(a.indexOf("/item/")>=0){if(typeof(itemDetail)==="undefined"||itemDetail===null||itemDetail===undefined||itemInfo===null||itemInfo===undefined){}else{pdpProductDetailImpression()}}if(a.indexOf("/shoppingcart")>=0){shoppingCartPromotionImpression();shoppingCartPromotionClick();shoppingCartCheckout();$(".shopcart-list .shopcart-compile li .remove").live("tap",function(){productList=new Array();var c={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};c.name=$(this).parents(".shopcart-list").find(".shopcart-details p").html();c.id=$(this).parents(".shopcart-list").attr("data-itemcode");c.price=parseInt($(this).parents(".shopcart-list").find(".shopcart-unit-price p").html().replace("¥","")).toFixed(2);c.brand="YSL";c.category="";c.variant="";c.quantity=parseInt($(this).parents(".shopcart-list").find(".shopcart-qty .dropdown-text").text().trim());var b=$(this).parents(".shopcart-list").find(".shopcart-details span").html();if(b.indexOf("#")>=0){c.dimension35="";c.dimension36=b.substring(b.indexOf("#"),b.length)}else{c.dimension36="";c.dimension35=b}c.dimension37="";c.dimension38="";c.dimension39="In stock";c.dimension40="";c.dimension152="";c.dimension153="";c.dimension154="";productList.push(c);if(productList.length>0){dataLayer.push({event:"removeFromCart",eventCategory:"Ecommerce",eventAction:"Remove from Cart",ecommerce:{currencyCode:"CNY",remove:{products:productList}}})}});$(".events-plus").live("tap",function(){var d=new Array();var c={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};c.name=$(this).parents(".shopcart-list").find(".shopcart-details p").html();c.id=$(this).parents(".shopcart-list").attr("data-itemcode");c.price=parseInt($(this).parents(".shopcart-list").find(".shopcart-unit-price p").html().replace("¥","")).toFixed(2);c.brand="YSL";c.category="";c.variant="";c.quantity=parseInt($(this).parents(".shopcart-list").find(".shopcart-qty .dropdown-text").text().trim());var b=$(this).parents(".shopcart-list").find(".shopcart-details span").html();if(b.indexOf("#")>=0){c.dimension35="";c.dimension36=b.substring(b.indexOf("#"),b.length)}else{c.dimension36="";c.dimension35=b}c.dimension37="";c.dimension38="";c.dimension39="In stock";c.dimension40="";c.dimension152="";c.dimension153="";c.dimension154="";d.push(c);if(d.length>0){dataLayer.push({event:"addToCart",eventCategory:"Ecommerce",eventAction:"Add to Cart",ecommerce:{currencyCode:"CNY",add:{products:d}}})}});$(".events-minus").live("tap",function(){var d=new Array();var c={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};c.name=$(this).parents(".shopcart-list").find(".shopcart-details p").html();c.id=$(this).parents(".shopcart-list").attr("data-itemcode");c.price=parseInt($(this).parents(".shopcart-list").find(".shopcart-unit-price p").html().replace("¥","")).toFixed(2);c.brand="YSL";c.category="";c.variant="";c.quantity=parseInt($(this).parents(".shopcart-list").find(".shopcart-qty .dropdown-text").text().trim());var b=$(this).parents(".shopcart-list").find(".shopcart-details span").html();if(b.indexOf("#")>=0){c.dimension35="";c.dimension36=b.substring(b.indexOf("#"),b.length)}else{c.dimension36="";c.dimension35=b}c.dimension37="";c.dimension38="";c.dimension39="In stock";c.dimension40="";c.dimension152="";c.dimension153="";c.dimension154="";d.push(c);if(d.length>0){dataLayer.push({event:"removeFromCart",eventCategory:"Ecommerce",eventAction:"Remove from Cart",ecommerce:{currencyCode:"CNY",remove:{products:d}}})}})}if(a.indexOf("/transaction/check")>=0){trialGiftPromotionImpression()}if(a.indexOf("/payment/paySuccess")>=0){}$(".event-addCart").live("tap",function(){addCartEvent()});$(".addCart").live("tap",function(){cartPageAddCartEvent()});$(".event-checkout").on("tap",function(){shoppingCartCheckoutStep2(loginFlag)});recommandProduct()});function recommandProduct(){recommandProductProductImpression();recommandProductProductClick()}function recommandProductProductClick(){$(".products-recommend-container>.swiper-container>.swiper-wrapper>.swiper-slide").live("tap",function(){var b=new Array();var a={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};a.name=$(this).find(".details-box .goods-title a").text().trim();a.id=$(this).attr("data-code");a.price=parseFloat($(this).find(".goods-price span").text().trim().replace("¥",""));a.brand="YSL";a.category="";a.variant="";a.list="recommand products list";a.position=1;a.dimension35="";a.dimension36="";a.dimension37="";a.dimension38="";a.dimension39="In stock";a.dimension40="";a.dimension152="";a.dimension153="";a.dimension154="";b.push(a);if(b.length>0){dataLayer.push({event:"productClick",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Click",ecommerce:{currencyCode:"CNY",impressions:b}})}});$(".article-suit .suit-product").live("tap",function(){var b=new Array();var a={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};a.name=$(this).find(".details-box .goods-tit a").text().trim();a.id=$(this).find(".goods-handle .event-quickbuy").attr("data-code");a.price=parseFloat($(this).find(".goods-price span").text().trim().replace("¥",""));a.brand="YSL";a.category="";a.variant="";a.list="recommand products list";a.position=1;a.dimension35="";a.dimension36="";a.dimension37="";a.dimension38="";a.dimension39="In stock";a.dimension40="";a.dimension152="";a.dimension153="";a.dimension154="";b.push(a);if(b.length>0){dataLayer.push({event:"productClick",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Click",ecommerce:{currencyCode:"CNY",impressions:b}})}});$(".article-recommend .recommend-item").live("tap",function(){var b=new Array();var a={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};a.name=$(this).find(".details-box .goods-tit a").text().trim();a.id=$(this).find(".goods-handle .event-quickbuy").attr("data-code");a.price=parseFloat($(this).find(".goods-price span").text().trim().replace("¥",""));a.brand="YSL";a.category="";a.variant="";a.list="recommand products list";a.position=1;a.dimension35="";a.dimension36="";a.dimension37="";a.dimension38="";a.dimension39="In stock";a.dimension40="";a.dimension152="";a.dimension153="";a.dimension154="";b.push(a);if(b.length>0){dataLayer.push({event:"productClick",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Click",ecommerce:{currencyCode:"CNY",impressions:b}})}})}function recommandProductProductImpression(){var b=new Array();var a=$(".products-recommend-container>.swiper-container>.swiper-wrapper>.swiper-slide");$(a).live("tap",function(){var c={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};c.name=$(this).find(".details-box .goods-title a").text().trim();c.id=$(this).find(".goods-handle .event-quickbuy").attr("data-code");c.price=parseFloat($(this).find(".goods-price span").text().trim().replace("¥",""));c.brand="YSL";c.category="";c.variant="";c.list="recommand products list";c.position=1;c.dimension35="";c.dimension36="";c.dimension37="";c.dimension38="";c.dimension39="In stock";c.dimension40="";c.dimension152="";c.dimension153="";c.dimension154="";b.push(c)});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}})}var b=new Array();var a=$(".article-suit .suit-product");a.each(function(c,f){var d={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};d.name=$(this).find(".details-box .goods-tit a").text().trim();d.id=$(this).find(".goods-handle .event-quickbuy").attr("data-code");d.price=parseFloat($(this).find(".goods-price span").text().trim().replace("¥",""));d.brand="YSL";d.category="";d.variant="";d.list="recommand products list";d.position=1;d.dimension35="";d.dimension36="";d.dimension37="";d.dimension38="";d.dimension39="In stock";d.dimension40="";d.dimension152="";d.dimension153="";d.dimension154="";b.push(d)});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}})}var b=new Array();var a=$(".article-recommend .recommend-item");a.each(function(c,f){var d={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};d.name=$(this).find(".details-box .goods-tit a").text().trim();d.id=$(this).find(".goods-handle .event-quickbuy").attr("data-code");d.price=parseFloat($(this).find(".goods-price span").text().trim().replace("¥",""));d.brand="YSL";d.category="";d.variant="";d.list="recommand products list";d.position=1;d.dimension35="";d.dimension36="";d.dimension37="";d.dimension38="";d.dimension39="In stock";d.dimension40="";d.dimension152="";d.dimension153="";d.dimension154="";b.push(d)});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}})}}function shoppingCartPromotionImpression(){var b=new Array();var a=$(".article-banner").find("img");$(a).each(function(c,f){var d={id:null,name:null,creative:null,position:null};d.name=$($(a)[c]).attr("alt");d.creative=$($(a)[c]).attr("src");d.id=$($(a)[c]).parent().attr("href");d.position="empty shoppingcart banner"+c;b.push(d)});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Promotion Impressions",ecommerce:{promoView:{promotions:b}}})}return b}function shoppingCartPromotionClick(){promotionList=new Array();$(".article-banner").find("a").on("tap",function(){var a={id:null,name:null,creative:null,position:null};a.name=$(this).find("img").attr("alt");a.creative=$(this).find("img").attr("src");a.id=$(this).attr("href");a.position="empty shoppingcart banner";promotionList.push(a);if(promotionList.length>0){dataLayer.push({event:"promotionClick",eventCategory:"Ecommerce",eventAction:"Promotion Click",ecommerce:{promoClick:{promotions:promotionList}}})}})}function addCartEvent(){var b=new Array();if(typeof(quickViewItemInfo)==="undefined"||quickViewItemInfo===null||quickViewItemInfo===undefined||quickViewItemDetail===null||quickViewItemDetail===undefined){}else{var a={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};a.name=quickViewItemInfo.title;a.id=quickViewItemInfo.code;a.price=quickViewItemInfo.salePrice;a.brand="YSL";a.category=quickViewItemDetail.categories[0].code;a.variant="";a.quantity=parseInt($(".product-num-select.select .dropdown-text").text().trim());a.dimension35="";quickViewItemDetail.properties.salesProperties.forEach(function(d,c){if(d.property.groupName==="ITEM_SIZE"){a.dimension35=d.propertyValues[0].propertyValue}});a.dimension36="";if($(".product-color-select.select .dropdown-text")!==null&&$(".product-color-select.select .dropdown-text")!==undefined){a.dimension36=$(".product-color-select.select .dropdown-text").text().trim()}a.dimension37="";a.dimension38="";a.dimension39="In stock";a.dimension40="";a.dimension152=quickViewItemDetail.skus[0].availableQty;a.dimension153="";a.dimension154="";b.push(a);if(b.length>0){dataLayer.push({event:"addToCart",eventCategory:"Ecommerce",eventAction:"Add to Cart",ecommerce:{currencyCode:"CNY",add:{products:b}}})}}}function cartPageAddCartEvent(){var b=new Array();if(typeof(itemDetail)==="undefined"||typeof(itemInfo)==="undefined"||itemDetail===null||itemDetail===undefined||itemInfo===null||itemInfo===undefined){}else{var a={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};a.name=itemInfo.title;a.id=itemInfo.code;a.price=itemInfo.salePrice;a.brand="YSL";a.category=itemDetail.categories[0].code;a.variant="";a.quantity=parseInt($(".select-size-dropdown .dropdown-text").text().trim());a.dimension35="";itemDetail.properties.salesProperties.forEach(function(d,c){if(d.property.groupName==="ITEM_SIZE"){a.dimension35=d.propertyValues[0].propertyValue}});a.dimension36="";if($(".product-color-select.select .dropdown-text")!==null&&$(".product-color-select.select .dropdown-text")!==undefined){a.dimension36=$(".select-color-dropdown .dropdown-text").text().trim()}a.dimension37="";a.dimension38="";a.dimension39="In stock";a.dimension40="";a.dimension152=itemDetail.skus[0].availableQty;a.dimension153="";a.dimension154="";b.push(a);if(b.length>0){dataLayer.push({event:"addToCart",eventCategory:"Ecommerce",eventAction:"Add to Cart",ecommerce:{currencyCode:"CNY",add:{products:b}}})}}}function landingPageTracking(){}function plpPromotionImpressions(){var b=new Array();var a=$(".plp-slide-banner").find("img");$(a).each(function(c,f){var d={id:null,name:null,creative:null,position:null};d.name=$($(a)[c]).attr("alt");d.creative=$($(a)[c]).attr("src");d.id=$($(a)[c]).parent().attr("href");d.position="plp slide banner"+c;b.push(d)});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Promotion Impressions",ecommerce:{promoView:{promotions:b}}})}}function plpPromotionClick(){$(".plp-slide-banner").find("a").live("tap",function(){var a=new Array();var b={id:null,name:null,creative:null,position:null};b.name=$(this).find("img").attr("alt");b.creative=$(this).find("img").attr("src");b.id=$(this).attr("href");b.position="plp slide banner"+i;a.push(b);if(a.length>0){dataLayer.push({event:"promotionClick",eventCategory:"Ecommerce",eventAction:"Promotion Click",ecommerce:{promoView:{promotions:a}}})}})}function plpProductImpression(a){if(typeof(itemList)==="undefined"||itemList===null||itemList===undefined){}else{var b=new Array();itemList.forEach(function(f,c){var d={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};d.name=f[0].title;d.id=f[0].code;d.price=f[0].sale_price;d.brand="YSL";d.category=f[0].allCategoryCodes[0];d.variant=f[0].allCategoryCodes[1];d.list=a.replace("/","").replace("/","");d.position=c;d.dimension35=f[0].itemSize;d.dimension36=f[0].itemColor;d.dimension37="";d.dimension38="";d.dimension39="In stock";d.dimension40="";d.dimension152="";d.dimension153="";d.dimension154="";b.push(d);if(b.length>0&&b.length%4===0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}});b=new Array()}});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}})}}}function pdpProductDetailImpression(){var b=new Array();if(typeof(itemDetail)==="undefined"||typeof(itemInfo)==="undefined"||itemDetail===null||itemDetail===undefined||itemInfo===null||itemInfo===undefined){}else{var a={name:null,id:null,price:null,brand:null,category:null,variant:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};a.name=itemInfo.title;a.id=itemInfo.code;a.price=itemInfo.salePrice;a.brand="YSL";a.category=itemDetail.categories[0].code;a.variant="";a.dimension35="";itemDetail.properties.salesProperties.forEach(function(d,c){if(d.property.groupName==="ITEM_SIZE"){a.dimension35=d.propertyValues[0].propertyValue}});a.dimension36="";if(itemDetail.colorSwatches.length>0){itemDetail.colorSwatches.forEach(function(d,c){a.dimension36+=d.propertyValue+";"})}a.dimension37="";a.dimension38="";a.dimension39="In stock";a.dimension40="";a.dimension152=itemDetail.skus[0].availableQty;a.dimension153="";a.dimension154="";b.push(a)}if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Detail",ecommerce:{detail:{actionField:{list:"product detail page"},products:b}}})}}function pdpProductImpression(){var b=new Array();if(typeof(itemDetail)==="undefined"||typeof(itemInfo)==="undefined"||itemDetail===null||itemDetail===undefined||itemInfo===null||itemInfo===undefined){}else{var a={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};a.name=itemInfo.title;a.id=itemInfo.code;a.price=itemInfo.salePrice;a.brand="YSL";a.category=itemDetail.categories[0].code;a.variant="";a.list="product detail page";a.position=1;a.dimension35="";itemDetail.properties.salesProperties.forEach(function(d,c){if(d.property.groupName==="ITEM_SIZE"){a.dimension35=d.propertyValues[0].propertyValue}});a.dimension36="";if(itemDetail.colorSwatches.length>0){itemDetail.colorSwatches.forEach(function(d,c){a.dimension36+=d.propertyValue+";"})}a.dimension37="";a.dimension38="";a.dimension39="In stock";a.dimension40="";a.dimension152=itemDetail.skus[0].availableQty;a.dimension153="";a.dimension154="";b.push(a)}if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}})}}function homePagePromotionImpression(){var c=new Array();var a=$(".article-kv").find(".swiper-slide img");$(a).each(function(h,k){var j={id:null,name:null,creative:null,position:null};var l=$($(a)[h]).parents(".article-kv").find(".swiper-nav li.is-active a").text();j.name=l;j.creative=$($(a)[h]).attr("src");j.id=$($(a)[h]).parent().attr("href");j.position="homepage kv"+h;c.push(j)});var g=$(".goods-img-details").find("img");$(g).each(function(h,k){var j={id:null,name:null,creative:null,position:null};j.name=$($(g)[h]).attr("title");j.creative=$($(g)[h]).attr("src");j.id=$($(g)[h]).parent().attr("href");j.position="homepage favorites "+h;c.push(j)});var b=$(".article-imgwrap").find("img");$(b).each(function(h,k){var j={id:null,name:null,creative:null,position:null};j.name=$($(b)[h]).attr("title");j.creative=$($(b)[h]).attr("src");j.id=$($(b)[h]).parent().attr("href");j.position="homepage beautyMagazine"+h;c.push(j)});var d=$(".article-video").find("img");var f={id:null,name:null,creative:null,position:null};var e=$(d).attr("title");f.name=e;f.creative=$(d).attr("src");f.id=$(d).parents(".video-content-center").find(".video-right a").attr("href");f.position="homepage video";c.push(f);if(c.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Promotion Impressions",ecommerce:{promoView:{promotions:c}}})}}function homePagePromotionClick(){var a=new Array();$(".article-kv").find(".swiper-slide a").on("tap",function(){var c={id:null,name:null,creative:null,position:null};var b=$(this).parent().attr("data-swiper-slide-index");c.name=$($(this).parents(".article-kv").find(".swiper-nav li")[b]).find("span").text().trim();c.creative=$(this).find("img").attr("src");c.id=$(this).attr("href");c.position="homepage kv";a.push(c);if(a.length>0){dataLayer.push({event:"promotionClick",eventCategory:"Ecommerce",eventAction:"Promotion Click",ecommerce:{promoClick:{promotions:a}}})}});a=new Array();$(".article-favorites").find(".goods-img-details a").on("tap",function(){var b={id:null,name:null,creative:null,position:null};b.name=$(this).find("img").attr("alt");b.creative=$(this).find("img").attr("src");b.id=$(this).attr("href");b.position="homepage favorite";a.push(b);if(a.length>0){dataLayer.push({event:"promotionClick",eventCategory:"Ecommerce",eventAction:"Promotion Click",ecommerce:{promoClick:{promotions:a}}})}});a=new Array();$(".article-imgwrap").on("tap",function(){var b={id:null,name:null,creative:null,position:null};b.name=$(this).find("img").attr("alt");b.creative=$(this).find("img").attr("src");b.id=$(this).find("img").parent().attr("href");b.position="homepage imgwrap";a.push(b);if(a.length>0){dataLayer.push({event:"promotionClick",eventCategory:"Ecommerce",eventAction:"Promotion Click",ecommerce:{promoClick:{promotions:a}}})}});a=new Array();$(".article-video").on("tap",function(){var b={id:null,name:null,creative:null,position:null};b.name=$(this).find("img").attr("alt");b.creative=$(this).find("img").attr("src");b.id=$(this).find("img").parents(".video-content-center").find(".video-right a").attr("href");b.position="homepage video";a.push(b);if(a.length>0){dataLayer.push({event:"promotionClick",eventCategory:"Ecommerce",eventAction:"Promotion Click",ecommerce:{promoClick:{promotions:a}}})}})}function homePageProductImpression(){var f=new Array();if(typeof(productTab)==="undefined"||productTab===null||productTab===undefined){}else{var b=$(".goods-tab-item").find(".e-hp-product");var c=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-active");for(var e=0;e<3;e++){var a=c;if(e===1){a=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-next")}if(e===2){a=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-next").next(".e-hp-product")}var d=a.attr("product-code");homePageProductShowIndex=homePageProductShowIndex+""+d+",";productTab.forEach(function(j,g){if(j.code===a.attr("product-code")){var h={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};h.name=j.title;h.id=j.code;h.price=j.sale_price;h.brand="YSL";h.category=j.allCategoryCodes[0];h.variant=j.allCategoryCodes[1];h.list="homepage";h.position=g;h.dimension35=j.itemSize;h.dimension36="";if(j.itemcolorlist.length>0){j.itemcolorlist.forEach(function(m,k){var l=m.style.split("（")[0].trim();h.dimension36+=l+";"})}h.dimension37="";h.dimension38="";h.dimension39="In stock";h.dimension40="";h.dimension152="";h.dimension153="";h.dimension154="";f.push(h)}})}if(f.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:f}})}}}function homePageProductClick(){var b=new Array();var a=$(".article-favorites").find(".e-hp-product .e-read-more");a.on("tap",function(){b=new Array();if(typeof(productTab)==="undefined"||productTab===null||productTab===undefined){}else{var c=$(this).parents(".e-hp-product").attr("product-code");productTab.forEach(function(f,d){if(c===f.code){var e={name:null,id:null,price:null,brand:null,category:null,variant:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};e.name=f.title;e.id=f.code;e.price=f.sale_price;e.brand="YSL";e.category=f.allCategoryCodes[0];e.variant=f.allCategoryCodes[1];e.dimension35=f.itemSize;e.dimension36="";if(f.itemcolorlist.length>0){f.itemcolorlist.forEach(function(j,g){var h=j.style.split("（")[0].trim();e.dimension36+=h+";"})}e.dimension37="";e.dimension38="";e.dimension39="In stock";e.dimension40="";e.dimension152="";e.dimension153="";e.dimension154="";b.push(e)}})}if(b.length>0){dataLayer.push({event:"productClick",eventCategory:"Ecommerce",eventAction:"Product Click",ecommerce:{click:{actionField:{list:"homepage"},products:b}}})}});$(".goods-tab-item.is-active>.swiper-button-prev").live("tap",function(){var h=new Array();if(typeof(productTab)==="undefined"||productTab===null||productTab===undefined){}else{var d=$(".goods-tab-item").find(".e-hp-product");var e=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-active");for(var g=0;g<3;g++){var c=e;if(g===1){c=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-next")}if(g===2){c=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-next").next(".e-hp-product")}var f=c.attr("product-code");if(homePageProductShowIndex.indexOf(f+"")<0){homePageProductShowIndex=homePageProductShowIndex+""+f+",";productTab.forEach(function(l,j){if(l.code===c.attr("product-code")){var k={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};k.name=l.title;k.id=l.code;k.price=l.sale_price;k.brand="YSL";k.category=l.allCategoryCodes[0];k.variant=l.allCategoryCodes[1];k.list="homepage";k.position=j;k.dimension35=l.itemSize;k.dimension36="";if(l.itemcolorlist.length>0){l.itemcolorlist.forEach(function(o,m){var n=o.style.split("（")[0].trim();k.dimension36+=n+";"})}k.dimension37="";k.dimension38="";k.dimension39="In stock";k.dimension40="";k.dimension152="";k.dimension153="";k.dimension154="";h.push(k)}})}}if(h.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:h}})}}});$(".goods-tab-item.is-active>.swiper-button-next").live("tap",function(){var h=new Array();if(typeof(productTab)==="undefined"||productTab===null||productTab===undefined){}else{var d=$(".goods-tab-item").find(".e-hp-product");var e=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-active");for(var g=0;g<3;g++){var c=e;if(g===1){c=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-next")}if(g===2){c=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-next").next(".e-hp-product")}var f=c.attr("product-code");if(homePageProductShowIndex.indexOf(f+"")<0){homePageProductShowIndex=homePageProductShowIndex+""+f+",";productTab.forEach(function(l,j){if(l.code===c.attr("product-code")){var k={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};k.name=l.title;k.id=l.code;k.price=l.sale_price;k.brand="YSL";k.category=l.allCategoryCodes[0];k.variant=l.allCategoryCodes[1];k.list="homepage";k.position=j;k.dimension35=l.itemSize;k.dimension36="";if(l.itemcolorlist.length>0){l.itemcolorlist.forEach(function(o,m){var n=o.style.split("（")[0].trim();k.dimension36+=n+";"})}k.dimension37="";k.dimension38="";k.dimension39="In stock";k.dimension40="";k.dimension152="";k.dimension153="";k.dimension154="";h.push(k)}})}}if(h.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:h}})}}});$(".favorites-aside li").live("tap",function(){var g=new Array();if(typeof(productTab)==="undefined"||productTab===null||productTab===undefined){}else{var d=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-active");for(var f=0;f<3;f++){var c=d;if(f===1){c=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-next")}if(f===2){c=$(".goods-tab-item.is-active").find(".e-hp-product.swiper-slide-next").next(".e-hp-product")}var e=c.attr("product-code");if(homePageProductShowIndex.indexOf(e+"")<0){homePageProductShowIndex=homePageProductShowIndex+""+e+",";productTab.forEach(function(k,h){if(k.code===c.attr("product-code")){var j={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};j.name=k.title;j.id=k.code;j.price=k.sale_price;j.brand="YSL";j.category=k.allCategoryCodes[0];j.variant=k.allCategoryCodes[1];j.list="homepage";j.position=h;j.dimension35=k.itemSize;j.dimension36="";if(k.itemcolorlist.length>0){k.itemcolorlist.forEach(function(n,l){var m=n.style.split("（")[0].trim();j.dimension36+=m+";"})}j.dimension37="";j.dimension38="";j.dimension39="In stock";j.dimension40="";j.dimension152="";j.dimension153="";j.dimension154="";g.push(j)}})}}if(g.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:g}})}}})}function homepageTracking(){homePagePromotionImpression();homePagePromotionClick();homePageProductImpression();homePageProductClick()}function plpItemImpressionTrackingCode(a){pageUrl=window.location.pathname;if(a===null||a===undefined){return}var b=new Array();a.each(function(c,f){var d={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};d.name=$(f).find(".goods-tit a").text().trim();d.id=$(f).find(".goods-handle a").attr("data-code");d.price=parseFloat($(f).find(".goods-price span").text().replace("¥","")).toFixed(2);d.brand="YSL";d.category="";d.variant="";d.list="category page L1";if(pageUrl.indexOf("allProducts")>0||pageUrl.indexOf("gifts")>=0||pageUrl.indexOf("fragrance")>=0||pageUrl.indexOf("skincare")>=0){d.list="category page L1"}if(pageUrl.indexOf("l2")>=0){d.list="category page L2"}if(pageUrl.indexOf("l3")>=0){d.list="category page L3"}d.position=c;d.dimension35="";d.dimension36="";d.dimension37="";d.dimension38="";d.dimension39="In stock";d.dimension40="";d.dimension152="";d.dimension153="";d.dimension154="";b.push(d);if(b.length>0&&b.length%4===0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}});b=new Array()}});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}})}}function allProductItemImpressionTrackingCode(a){pageUrl=window.location.pathname;if(a===null||a===undefined){return}var b=new Array();a.each(function(c,f){var d={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};d.name=$(f).find(".product-title").text().trim();d.id=$(f).find(".goods-handle a").text().trim();d.price=parseFloat($(f).find(".product-price").text().replace("¥","")).toFixed(2);d.brand="YSL";d.category="";d.variant="";d.list="category page L1";if(pageUrl.indexOf("allProducts")>0||pageUrl.indexOf("l1")>=0||pageUrl.indexOf("l2")>=0||pageUrl.indexOf("l3")>=0){d.list="category page L1"}if(pageUrl.indexOf("l2")>=0){d.list="category page L2"}if(pageUrl.indexOf("l3")>=0){d.list="category page L3"}d.position=c;d.dimension35="";d.dimension36="";d.dimension37="";d.dimension38="";d.dimension39="In stock";d.dimension40="";d.dimension152="";d.dimension153="";d.dimension154="";b.push(d);if(b.length>0&&b.length%4===0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}});b=new Array()}});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}})}}function plpProductClick(b){var c=new Array();var a=$(".plp-slide .e-read-more");a.on("tap",function(){var d={name:null,id:null,price:null,brand:null,category:null,variant:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};d.name=$(this).parents(".plp-slide").find(".goods-tit a").text().trim();d.id=$(this).parents(".plp-slide").find(".goods-handle a").attr("data-code");d.price=parseFloat($(this).parents(".plp-slide").find(".goods-price span").text().replace("¥","")).toFixed(2);d.brand="YSL";d.category="";d.variant="";d.dimension35="";d.dimension36="";d.dimension37="";d.dimension38="";d.dimension39="In stock";d.dimension40="";d.dimension152="";d.dimension153="";d.dimension154="";c.push(d);if(c.length>0){dataLayer.push({event:"productClick",eventCategory:"Ecommerce",eventAction:"Product Click",ecommerce:{click:{actionField:{list:b.replace("/","").replace("/","")},products:c}}})}})}function shoppingCartCheckout(){if(typeof(cartlineList)==="undefined"||cartlineList===null||cartlineList===undefined){}else{var a=new Array();cartlineList[0].forEach(function(e,c){var d={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};d.name=e.itemName;d.id=e.itemCode;d.price=e.salePrice;d.brand="YSL";d.category="";d.variant="";d.quantity=e.quantity;d.dimension35="";if(typeof(e.propertiesMap.SIZE)!=="undefined"&&e.propertiesMap.SIZE!==undefined){d.dimension35=e.propertiesMap.SIZE.value}d.dimension36="";if(typeof(e.propertiesMap.颜色)!=="undefined"&&e.propertiesMap.颜色!==undefined){var b=e.propertiesMap.颜色.value;if(b.indexOf("|")>=0){b=b.substring(b.indexOf("|")+1,b.length);b=b.substring(0,b.indexOf(" "))}d.dimension36=b}d.dimension37="";d.dimension38="";d.dimension39="Not in stock";if(e.stock>0){d.dimension39="In stock"}d.dimension40="";d.dimension152=e.listPrice;d.dimension153="";d.dimension154="";a.push(d)});if(a.length>0){dataLayer.push({event:"checkout",eventCategory:"Ecommerce",eventAction:"Checkout",ecommerce:{checkout:{actionField:{step:"1",option:"Go To Checkout"},products:a}}})}}}function shoppingCartCheckoutStep2(b){if(typeof(cartlineList)==="undefined"||cartlineList===null||cartlineList===undefined){}else{var c=new Array();cartlineList[0].forEach(function(g,e){var f={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};f.name=g.itemName;f.id=g.itemCode;f.price=g.salePrice;f.brand="YSL";f.category="";f.variant="";f.quantity=g.quantity;f.dimension35="";if(typeof(g.propertiesMap.SIZE)!=="undefined"&&g.propertiesMap.SIZE!==undefined){f.dimension35=g.propertiesMap.SIZE.value}f.dimension36="";if(typeof(g.propertiesMap.颜色)!=="undefined"&&g.propertiesMap.颜色!==undefined){var d=g.propertiesMap.颜色.value;if(d.indexOf("|")>=0){d=d.substring(d.indexOf("|")+1,d.length);d=d.substring(0,d.indexOf(" "))}f.dimension36=d}f.dimension37="";f.dimension38="";f.dimension39="Not in stock";if(g.stock>0){f.dimension39="In stock"}f.dimension40="";f.dimension152=g.listPrice;f.dimension153="";f.dimension154="";c.push(f)});var a="";if(b){a="user logged"}else{a="user not logged"}if(c.length>0){dataLayer.push({event:"checkout",eventCategory:"Ecommerce",eventAction:"Checkout",ecommerce:{checkout:{actionField:{step:"2",option:a},products:c}}})}}}function transactionCheckout(){if(typeof(cartlineList)==="undefined"||cartlineList===null||cartlineList===undefined){}else{var c=new Array();cartlineList.forEach(function(f,d){var e={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};e.name=f.itemName;e.id=f.productCode;e.price=f.salePrice;e.brand="YSL";e.category="";e.variant="";e.quantity=f.quantity;e.dimension35="";f.skuPropertys.forEach(function(h,g){if(h.pName==="ITEM_SIZE"){e.dimension35=h.value}});e.dimension36="";f.skuPropertys.forEach(function(h,g){if(h.pName==="颜色"){e.dimension36=h.value}});e.dimension37="";e.dimension38="";e.dimension39="Not in stock";if(f.stock>0){e.dimension39="In stock"}e.dimension40="";e.dimension152=f.listPrice;e.dimension153="";e.dimension154="";c.push(e)});var b=$(".payment-method-container").find(".form-group .form-checkbox.is-active").attr("paymenttype");var a="alipay";if(b==="6"){a="alipay"}if(b==="4"){a="wechat pay"}if(b==="320"){a="unionPay"}if(b==="1"){a="cash on delivery"}if(c.length>0){dataLayer.push({event:"checkout",eventCategory:"Ecommerce",eventAction:"Checkout",ecommerce:{checkout:{actionField:{step:"3",option:a},products:c}}})}}}function purchasesEvent(c){var e=new Array();if(typeof(cartlineList)==="undefined"||cartlineList===null||cartlineList===undefined){}else{cartlineList.forEach(function(h,f){var g={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};g.name=h.itemName;g.id=h.productCode;g.price=h.salePrice;g.brand="YSL";g.category="";g.variant="";g.quantity=h.quantity;g.dimension35="";h.skuPropertys.forEach(function(k,j){if(k.pName==="ITEM_SIZE"){g.dimension35=k.value}});g.dimension36="";h.skuPropertys.forEach(function(k,j){if(k.pName==="颜色"){g.dimension36=k.value}});g.dimension37="";g.dimension38="";g.dimension39="Not in stock";if(h.stock>0){g.dimension39="In stock"}g.dimension40="";g.dimension152=h.listPrice;g.dimension153="";g.dimension154="";e.push(g)})}var b=parseFloat($(".article-order-summary .delivery-price").text().replace("¥","")).toFixed(2);var d=parseFloat($(".article-order-summary .total-price").text().replace("¥","")).toFixed(2);if(e.length>0){var a="";if(typeof(orderCouponsCode)!=="undefined"&&orderCouponsCode!==null){orderCouponsCode.forEach(function(g,f){a=a+g.toString()+","})}dataLayer.push({event:"uaevent",eventCategory:"Ecommerce",eventAction:"Purchase",ecommerce:{purchase:{actionField:{id:c,affiliation:"",revenue:d,tax:"",shipping:b,coupon:a},products:e}}})}}function paymentCheckoutStep4(){if(typeof(orderLines)==="undefined"||orderLines===null||orderLines===undefined){}else{var c=new Array();orderLines.forEach(function(f,d){var e={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};e.name=f.itemName;e.id=f.extentionCode;e.price=f.salePrice;e.brand="YSL";e.category="";e.variant="";e.quantity=f.count;e.dimension35="";f.skuPropertys.forEach(function(h,g){if(h.pName==="ITEM_SIZE"){e.dimension35=h.value}});e.dimension36="";f.skuPropertys.forEach(function(h,g){if(h.pName==="颜色"){e.dimension36=h.value}});e.dimension37="";e.dimension38="";e.dimension39="Not in stock";if(f.stock>0){e.dimension39="In stock"}e.dimension40="";e.dimension152=f.salePrice;e.dimension153="";e.dimension154="";c.push(e)});var b=$(".payment-list .is-active").attr("paymenttype");var a="alipay";if(b==="6"){a="alipay"}if(b==="4"){a="wechat pay"}if(b==="320"){a="unionPay"}if(b==="1"){a="cash on delivery"}if(c.length>0){dataLayer.push({event:"checkout",eventCategory:"Ecommerce",eventAction:"Checkout",ecommerce:{checkout:{actionField:{step:"4",option:a},products:c}}})}}}function trialGiftPromotionImpression(){var b=new Array();var a=$(".checkout-try-out .try-out-container li").find("img");$(a).each(function(c,f){var d={id:null,name:null,creative:null,position:null};d.name=$($(a)[c]).parent().attr("data-trail-itemname");d.creative=$($(a)[c]).attr("src");d.id="";d.position="checkout trial gift "+c;b.push(d)});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Promotion Impressions",ecommerce:{promoView:{promotions:b}}})}}function trialGiftPromotionClick(){$(".checkout-try-out .try-out-container li").live("tap",function(){var a=new Array();var b={id:null,name:null,creative:null,position:null};b.name=$(this).attr("data-trail-itemname");b.creative=$(this).find("img").attr("src");b.id="";b.position="checkout trial gift "+i;a.push(b);if(a.length>0){dataLayer.push({event:"promotionClick",eventCategory:"Ecommerce",eventAction:"Promotion Click",ecommerce:{promoView:{promotions:a}}})}})}function paymentSuccessCheckout(){if(typeof(orderLines)==="undefined"||orderLines===null||orderLines===undefined){}else{var c=new Array();orderLines.forEach(function(f,d){var e={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};e.name=f.itemName;e.id=f.extentionCode;e.price=f.salePrice;e.brand="YSL";e.category="";e.variant="";e.quantity=f.count;e.dimension35="";f.skuPropertys.forEach(function(h,g){if(h.pName==="ITEM_SIZE"){e.dimension35=h.value}});e.dimension36="";f.skuPropertys.forEach(function(h,g){if(h.pName==="颜色"){e.dimension36=h.value}});e.dimension37="";e.dimension38="";e.dimension39="Not in stock";if(f.stock>0){e.dimension39="In stock"}e.dimension40="";e.dimension152=f.salePrice;e.dimension153="";e.dimension154="";c.push(e)});var b=b;var a="alipay";if(b==="6"){a="alipay"}if(b==="4"){a="wechat pay"}if(b==="320"){a="unionPay"}if(b==="1"){a="cash on delivery"}if(c.length>0){dataLayer.push({event:"checkout",eventCategory:"Ecommerce",eventAction:"Checkout",ecommerce:{checkout:{actionField:{step:"5",option:"Success"},products:c}}})}}}function headerFooterPromotionImpressions(){$(".nav-pills>li").hover(function(){var e=$(this).find(">a span").text();if(headerPromotionShow.indexOf(e)<0){var d=new Array();var c=$(this).find(".sub-menu .products-recommended");c.each(function(f,g){var h={id:null,name:null,creative:null,position:null};var j=$(this).find(".right h4 a").text();h.name=j;h.creative=$(this).find(".left a img").attr("src");h.id=$(this).find(".left a").attr("href");h.position="header menu"+f;d.push(h)});if(d.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Promotion Impressions",ecommerce:{promoView:{promotions:d}}});headerPromotionShow=headerPromotionShow+e+","}}},function(){});if($(".top-promo-container p").length>0){var a=new Array();var b={id:null,name:null,creative:null,position:null};b.name=$(".top-promo-container p").text();b.creative="";b.id=$(".top-promo-container a").attr("href");b.position="homepage top promotion";a.push(b);if(a.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Promotion Impressions",ecommerce:{promoView:{promotions:a}}})}}}function headerFooterPromotionClick(){$(".nav-pills .sub-menu").find(".products-recommended").live("tap",function(){var a={id:null,name:null,creative:null,position:null};a.name=$(this).find("img").attr("title");a.creative="";a.id=$(this).find(".left a").attr("href");a.position="header menu";promotionList.push(a);if(promotionList.length>0){dataLayer.push({event:"promotionClick",eventCategory:"Ecommerce",eventAction:"Promotion Click",ecommerce:{promoClick:{promotions:promotionList}}})}});promotionList=new Array();$(".top-promo-container").on("tap",function(){var a={id:null,name:null,creative:null,position:null};a.name=$(this).find("span").text();a.creative="";a.id=$(this).find("a").attr("href");a.position="top promotion";promotionList.push(a);if(promotionList.length>0){dataLayer.push({event:"promotionClick",eventCategory:"Ecommerce",eventAction:"Promotion Click",ecommerce:{promoClick:{promotions:promotionList}}})}})}function headerFooterProductImpressions(){}function miniCartProductImpressions(){var b=new Array();var a=$(".header-shopping-bag.is-hover .sub-menu-empty .product-list li");a.each(function(c,f){var d={name:null,id:null,price:null,brand:null,category:null,variant:null,list:null,position:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};d.name=$(f).find(".product-information .title a").text();d.id=$(f).find(".product-information .title a").attr("href").replace("/item/","");d.price=parseFloat($(f).find(".product-information .price span").text().replace("¥","")).toFixed(2);d.brand="YSL";d.category="";d.variant="";d.list="minicart";d.position=c;d.dimension35=$(f).find(".product-information .color span").last().text();d.dimension36=$(f).find(".product-information .color span").first().text();d.dimension37="";d.dimension38="";d.dimension39="In stock";d.dimension40="";d.dimension152="";d.dimension153="";d.dimension154="";b.push(d);if(b.length>0&&b.length%4===0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}});b=new Array()}});if(b.length>0){dataLayer.push({event:"uaevent",nonInteraction:true,eventCategory:"Ecommerce",eventAction:"Product Impressions",ecommerce:{currencyCode:"CNY",impressions:b}})}}function miniCartProductClick(){$(".suitAllBuy").live("tap",function(){var b=new Array();var a=$(".suit-dialog .suit-list .suit-item");a.each(function(f,h){var g={name:null,id:null,price:null,brand:null,category:null,variant:null,quantity:null,dimension35:null,dimension36:null,dimension37:null,dimension38:null,dimension39:null,dimension40:null,dimension152:null,dimension153:null,dimension154:null};g.name=$(this).find(".details-box p a").text().trim();g.id=$(this).find(".details-box .product-color-select").find("li.is-active").attr("code");g.price=parseFloat($(this).attr("saleprice"));g.brand="YSL";g.category="";g.variant="";g.quantity=parseInt($(this).find(".details-box .product-num").find("input").val().trim());var d=$(this).find(".details-box .product-color-select").find("li.is-active").find("span")[1];var c=$(d).text();if(c.indexOf("#")>=0){g.dimension35="";g.dimension36=c.substring(c.indexOf("#"),c.length)}else{g.dimension36="";g.dimension35=c}g.dimension37="";g.dimension38="";g.dimension39="In stock";g.dimension40="";g.dimension152="";g.dimension153="";g.dimension154="";b.push(g)});if(b.length>0){dataLayer.push({event:"addToCart",eventCategory:"Ecommerce",eventAction:"Add to Cart",ecommerce:{currencyCode:"CNY",add:{products:b}}})}})};